{
  "version": 3,
  "sources": ["../../../app/routes/login.jsx"],
  "sourcesContent": ["import { json,redirect } from \"@remix-run/node\";\r\nimport { Col, Row, Input, Avatar, Alert, Button, Typography } from 'antd'\r\nimport { UserOutlined } from '@ant-design/icons'\r\nimport { useActionData, Form, useNavigate } from '@remix-run/react'\r\nimport { useEffect, useState } from 'react'\r\nimport Cookies from 'js-cookie'\r\nimport { btnCat } from './user/styles'\r\nimport { loginUser } from '~/backend/src/services/authServices';\r\nimport { createUserSession,getUser, getUserId } from \"~/authSession/session\";\r\nconst { Title, Paragraph, Text } = Typography\r\n\r\nexport async function action({ request }) {\r\n\tconst form = await request.formData()\r\n\tconst email = form.get('email')\r\n\tconst password = form.get('password')\r\n\tswitch (request.method) {\r\n\t\tcase 'POST': {\r\n\t\t\tconst userData = await loginUser(email, password)\r\n\t\t\tif (!userData) {\r\n\t\t\t\treturn json(\r\n\t\t\t\t  { errors: { email: \"Invalid email or password\", password: null } },\r\n\t\t\t\t  { status: 400 }\r\n\t\t\t\t);\r\n\t\t\t}\t\r\n\t\t\t  return createUserSession( request, userData.user._id, `/user/dashboard/${userData.user._id}`);\r\n\t\t\t// return userData;\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn 'invalid login form data';\r\n\t}\r\n}\r\nexport async function loader({ request }) {\r\n\tconst id = getUserId();\r\n\treturn await getUser(request) ? redirect(`/user/dashboard/639c1738bebc82f02476e66a`) : null\r\n}\r\n\r\nexport const meta = () => {\r\n\treturn {\r\n\t  title: \"Login\",\r\n\t};\r\n  };\r\n\r\nexport default function Login() {\r\n\tconst actionData = useActionData()\r\n\tconst navigate = useNavigate()\r\n\tconst userId = actionData?.user._id;\r\n\tconst [inputs, setInputs] = useState({\r\n\t\temail: '',\r\n\t\tpassword: '',\r\n\t})\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userId == undefined) {\r\n\t\t\treturn navigate('/login')\r\n\t\t} else {\r\n\t\t\tCookies.set('id', userId)\t\r\n\t\t\treturn navigate(`/user/dashboard/${userId}`)\r\n\t\t}\r\n\t}, [navigate, userId])\r\n\r\n\tconst handleChange = (e) => {\r\n\t\tsetInputs((prevState) => ({\r\n\t\t\t...prevState,\r\n\t\t\t[e.target.name]: e.target.value,\r\n\t\t}))\r\n\t}\r\n\treturn (\r\n\t\t<Row\r\n\t\t\tjustify='center'\r\n\t\t\talign='middle'\r\n\t\t\tstyle={{ height: '100vh' }}>\r\n\t\t\t<Col\r\n\t\t\t\tsm={16}\r\n\t\t\t\txl={10}>\r\n\t\t\t\t{actionData?.message ? (\r\n\t\t\t\t\t<Alert\r\n\t\t\t\t\t\tmessage={actionData?.message}\r\n\t\t\t\t\t\ttype='success'\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : null}\r\n\t\t\t\t{actionData?.error?.message ? (\r\n\t\t\t\t\t<Alert\r\n\t\t\t\t\t\tmessage='Please provide a valid email address and password.'\r\n\t\t\t\t\t\ttype='error'\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : null}\r\n\r\n\t\t\t\t<div className='main-user-component'>\r\n\t\t\t\t\t<div className='main-component login'>\r\n\t\t\t\t\t\t<div style={{ textAlign: 'center' }}>\r\n\t\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackgroundColor: '#9c27b0',\r\n\t\t\t\t\t\t\t\t\tverticalAlign: 'middle',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tsize='large'>\r\n\t\t\t\t\t\t\t\t<UserOutlined size='large' />\r\n\t\t\t\t\t\t\t</Avatar>\r\n\t\t\t\t\t\t\t<Title\r\n\t\t\t\t\t\t\t\tlevel={2}\r\n\t\t\t\t\t\t\t\tstyle={{ marginTop: '10px' }}>\r\n\t\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t\t</Title>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<Form method='POST'>\r\n\t\t\t\t\t\t\t<Row\r\n\t\t\t\t\t\t\t\tgutter={[16, 16]}\r\n\t\t\t\t\t\t\t\tclassName='row'>\r\n\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\tsm={24}\r\n\t\t\t\t\t\t\t\t\txl={24}>\r\n\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\tname='email'\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Email Address'\r\n\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\t\tvalue={inputs.email}\r\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t{actionData?.formErrors?.email ? (\r\n\t\t\t\t\t\t\t\t\t\t<Text type='danger'>{actionData?.formErrors?.email}</Text>\r\n\t\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\tsm={24}\r\n\t\t\t\t\t\t\t\t\txl={24}>\r\n\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\tname='password'\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Password'\r\n\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\t\t\t\tautoComplete='off'\r\n\t\t\t\t\t\t\t\t\t\tvalue={inputs.password}\r\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\t\t\tspan={8}\r\n\t\t\t\t\t\t\t\t\t\t\talign='left'>\r\n\t\t\t\t\t\t\t\t\t\t\t<Paragraph strong>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype='link'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thref='/password/forgot'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tForgot Your Password\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t</Paragraph>\r\n\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col span={24}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\ttype='primary'\r\n\t\t\t\t\t\t\t\t\t\thtmlType='submit'\r\n\t\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\t\tstyle={btnCat}>\r\n\t\t\t\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col span={24}>\r\n\t\t\t\t\t\t\t\t\t<Paragraph\r\n\t\t\t\t\t\t\t\t\t\tstrong\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ marginBottom: 0 }}>\r\n\t\t\t\t\t\t\t\t\t\tDon't have an account?\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttype='link'\r\n\t\t\t\t\t\t\t\t\t\t\thref='/'>\r\n\t\t\t\t\t\t\t\t\t\t\tSign Up\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</Paragraph>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t)\r\n}\r\n"],
  "mappings": "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",
  "names": ["import_react"]
}
