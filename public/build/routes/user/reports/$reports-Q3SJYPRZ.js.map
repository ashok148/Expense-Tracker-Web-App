{
  "version": 3,
  "sources": ["../../../../../app/routes/user/reports/$reports.jsx"],
  "sourcesContent": ["import React, { useRef, useState, useEffect } from 'react'\r\nimport { useLoaderData } from '@remix-run/react'\r\nimport { SearchOutlined } from '@ant-design/icons'\r\nimport MainLayout from '../../layouts/home'\r\nimport {\r\n\tButton,\r\n\tInput,\r\n\tSpace,\r\n\tTable,\r\n\tBreadcrumb,\r\n\tCol,\r\n\tRow,\r\n\tTypography,\r\n} from 'antd'\r\nimport Highlighter from 'react-highlight-words'\r\nimport { transItems } from '../../user/styles'\r\nimport ReportDownload from './ReportDownload'\r\nimport { getExpenseByUserId } from '~/backend/src/services/expenseServices'\r\n// import { requireUserId } from '~/authSession/session'\r\nconst { Title } = Typography\r\n\r\nexport async function loader({request, params }) {\r\n\t// await requireUserId(request);\r\n\tconst id = params.reports\r\n\tconst expenseList = await getExpenseByUserId(id)\r\n\treturn expenseList\r\n}\r\nconst Report = () => {\r\n\tconst loaderData = useLoaderData()\r\n\tconst [expenses, setExpenses] = useState([])\r\n\tuseEffect(() => {\r\n\t\tconst data = loaderData?.user?.expenses\r\n\t\tsetExpenses(data)\r\n\t}, [loaderData])\r\n\tconst [searchText, setSearchText] = useState('')\r\n\tconst [searchedColumn, setSearchedColumn] = useState('')\r\n\tconst searchInput = useRef(null)\r\n\tconst handleSearch = (selectedKeys, confirm, dataIndex) => {\r\n\t\tconfirm()\r\n\t\tsetSearchText(selectedKeys[0])\r\n\t\tsetSearchedColumn(dataIndex)\r\n\t}\r\n\tconst handleReset = (clearFilters) => {\r\n\t\tclearFilters()\r\n\t\tsetSearchText('')\r\n\t}\r\n\tconst getColumnSearchProps = (dataIndex) => ({\r\n\t\tfilterDropdown: ({\r\n\t\t\tsetSelectedKeys,\r\n\t\t\tselectedKeys,\r\n\t\t\tconfirm,\r\n\t\t\tclearFilters,\r\n\t\t\tclose,\r\n\t\t}) => (\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tpadding: 8,\r\n\t\t\t\t}}\r\n\t\t\t\tonKeyDown={(e) => e.stopPropagation()}>\r\n\t\t\t\t<Input\r\n\t\t\t\t\tref={searchInput}\r\n\t\t\t\t\tplaceholder={`Search ${dataIndex}`}\r\n\t\t\t\t\tvalue={selectedKeys[0]}\r\n\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\tsetSelectedKeys(e.target.value ? [e.target.value] : [])\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonPressEnter={() => handleSearch(selectedKeys, confirm, dataIndex)}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tmarginBottom: 8,\r\n\t\t\t\t\t\tdisplay: 'block',\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<Space>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype='primary'\r\n\t\t\t\t\t\tonClick={() => handleSearch(selectedKeys, confirm, dataIndex)}\r\n\t\t\t\t\t\ticon={<SearchOutlined />}\r\n\t\t\t\t\t\tsize='small'>\r\n\t\t\t\t\t\tSearch\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={() => clearFilters && handleReset(clearFilters)}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\ttype='primary'>\r\n\t\t\t\t\t\tReset\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\ttype='primary'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tconfirm({\r\n\t\t\t\t\t\t\t\tcloseDropdown: false,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tsetSearchText(selectedKeys[0])\r\n\t\t\t\t\t\t\tsetSearchedColumn(dataIndex)\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tFilter\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype='primary'\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tclose()\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tclose\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Space>\r\n\t\t\t</div>\r\n\t\t),\r\n\t\tfilterIcon: (filtered) => (\r\n\t\t\t<SearchOutlined\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tcolor: filtered ? '#1890ff' : undefined,\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t),\r\n\t\tonFilter: (value, record) =>\r\n\t\t\trecord[dataIndex].toString().toLowerCase().includes(value.toLowerCase()),\r\n\t\tonFilterDropdownOpenChange: (visible) => {\r\n\t\t\tif (visible) {\r\n\t\t\t\tsetTimeout(() => searchInput.current?.select(), 100)\r\n\t\t\t}\r\n\t\t},\r\n\t\trender: (text) =>\r\n\t\t\tsearchedColumn === dataIndex ? (\r\n\t\t\t\t<Highlighter\r\n\t\t\t\t\thighlightStyle={{\r\n\t\t\t\t\t\tbackgroundColor: '#ffc069',\r\n\t\t\t\t\t\tpadding: 0,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tsearchWords={[searchText]}\r\n\t\t\t\t\tautoEscape\r\n\t\t\t\t\ttextToHighlight={text ? text.toString() : ''}\r\n\t\t\t\t/>\r\n\t\t\t) : (\r\n\t\t\t\ttext\r\n\t\t\t),\r\n\t})\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Item Name',\r\n\t\t\tdataIndex: 'title',\r\n\t\t\tkey: 'title',\r\n\t\t\t...getColumnSearchProps('title'),\r\n\t\t\tsorter: (a, b) => a.title.length - b.title.length,\r\n\t\t\tsortDirections: ['descend', 'ascend'],\r\n\t\t\trender: (text) => <a>{text}</a>,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Category',\r\n\t\t\tdataIndex: 'category',\r\n\t\t\tkey: 'category',\r\n\t\t\t...getColumnSearchProps('category'),\r\n\t\t\tsorter: (a, b) => a.category.length - b.category.length,\r\n\t\t\tsortDirections: ['descend', 'ascend'],\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Amount',\r\n\t\t\tdataIndex: 'amount',\r\n\t\t\tkey: 'amount',\r\n\t\t\tdefaultSortOrder: 'descend',\r\n\t\t\tsorter: (a, b) => a.amount - b.amount,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Expense Date',\r\n\t\t\tdataIndex: 'createdAt',\r\n\t\t\tkey: 'createdAt',\r\n\t\t},\r\n\t]\r\n\treturn (\r\n\t\t<MainLayout>\r\n\t\t\t<div>\r\n\t\t\t\t<Breadcrumb\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tmargin: '16px 0',\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<Breadcrumb.Item style={{ color: '#3dc4e0' }}>User</Breadcrumb.Item>\r\n\t\t\t\t\t<Breadcrumb.Item>Reports</Breadcrumb.Item>\r\n\t\t\t\t</Breadcrumb>\r\n\t\t\t\t<div style={transItems}>\r\n\t\t\t\t\t<Row\r\n\t\t\t\t\t\tjustify='space-between'\r\n\t\t\t\t\t\talign='middle'\r\n\t\t\t\t\t\tstyle={{ marginBottom: 20 }}>\r\n\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\tsm={12}\r\n\t\t\t\t\t\t\txl={12}>\r\n\t\t\t\t\t\t\t<Title\r\n\t\t\t\t\t\t\t\tlevel={3}\r\n\t\t\t\t\t\t\t\tstyle={{ marginTop: 0 }}>\r\n\t\t\t\t\t\t\t\tDownload Expense Report\r\n\t\t\t\t\t\t\t</Title>\r\n\t\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\tsm={12}\r\n\t\t\t\t\t\t\txl={12}\r\n\t\t\t\t\t\t\tstyle={{ textAlign: 'right' }}>\r\n\t\t\t\t\t\t\t<ReportDownload expenses={expenses} />\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\tdataSource={expenses}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</MainLayout>\r\n\t)\r\n}\r\nexport default Report\r\n"],
  "mappings": "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",
  "names": ["Highlighter"]
}
